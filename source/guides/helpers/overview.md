---
title: Руководство - Хэлперы: Обзор
---

# Обзор

Представления Ханами отвечают за внешний вид нашего приложения.
Хэлперы же созданы чтобы обогатить представления набором полезных функций.

Если вы знакомы с базовыми возможностями Руби, то без труда поймете эту идею.

```ruby
module Printable
  def print
    puts "..."
  end
end

class Person
  include Printable
end

Person.new.print
```

Подобным образом устроены представления и хэлперы.

Ханами по умолчанию включает в себя набор хэлперов, но мы можем определить и собственные.

## В контексте рендеринга

Представления рендерят соответствующие шаблоны.
Контекст этой операции определяется только теми методами, которые доступны в контексте представления.

Если представление реализует метод `#greeting`, то мы сможем его использовать в шаблоне: `<%= greeting %>`.

Такое решение имеет несколько важных достоинств:

  * Это упрощает отладку. При получении исключения у нас будет **узкий круг поиска его источника**.
  * Интерпретатор Руби сможет **быстро** найти необходимый метод, так как ему не придется анализировать большое количество источников методов.

Рассмотрим следующий пример:

```ruby
# apps/web/views/books/show.rb
module Web::Views::Books
  include Web::View

  def home_page_link
    link_to "Home", "/"
  end
end
```

Наше представление быстро получит отклик на `#link_to`, потому что он находится в модуле  `Hanami::Helpers::LinkToHelper`, специально созданном для этого метода.

## Очистка контекста

Некоторые хэлперы несут с собой огромные интерфейсы.
Если вспомнить о [HTML5](/guides/helpers/html5) или [маршрутизационных](/guides/helpers/routing) хэлперах, то станет понятно, что они поставляются с сотнями методов.

Сделав их доступными прямо внутри представлений мы сильно замедлим их работу и можем спровоцировать коллизии имен.

Представим, у нас есть приложение с сотней маршрутов.
Ханами создает хэлперы для относительных и абсолютных URI. Сделав их доступными напрямую мы добавим во все представления **200 методов**.
Это перебор.

По этой причине некоторые хэлперы выполняют роль прокси для доступа к большому набору методов.

```erb
<%= routes.home_path %>
```

В этом случае в контекст представлений будет добавлен **только один метод**, но он откроет бесконечные возможности, не оказывая такого большого влияния на производительность.

## Явные интерфейсы

Ханами подталкивает разработчиков создавать явные и открытые интерфейсы для их объектов.
Почти все стандартные хэлперы открывают представлениями доступ к своим **закрытым методам**.

Мы хотим избежать сложных выражений, которые будут засорять шаблоны и сделают тестирование невозможным.

Вот пример **чистого**, но **нетестируемого** кода в шаблоне.

```erb
<%= format_number book.downloads_count %>
```

Если мы захотим создать модульные тесты для него, то не сможем сделать этого напрямую, пока не отрендерим шаблон и не получим результат.

По этой причине `#format_number` поставляется как закрытый метод, поэтому мы будем вынуждены явно определить следующий метод.

```ruby
# apps/web/views/books/show.rb
module Web::Views::Books
  include Web::View

  def downloads_count
    format_number book.downloads_count
  end
end
```

Он будет использоваться так:

```erb
<%= downloads_count %>
```

Этот код гораздо более **семантичен** и легко поддается **тестированию**.

## Отключение хэлперов

Хэлперы не всегда нужны в приложениях Ханами.
Если мы не захотим их использовать, то достаточно удалить две строки кода.

```ruby
# apps/web/application.rb
require 'hanami/helpers' # Удалить эту строку

module Web
  class Application < Hanami::Application
    configure do
      # ...

      view.prepare do
        include Hanami::Helpers # И эту
      end
    end
  end
end
```
